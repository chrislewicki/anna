services:
  anna:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: anna-bot
    restart: unless-stopped
    env_file:
      - .env

    # Host network mode: Required for ollama-local provider to access localhost
    # This allows the container to access services running on the host machine
    # Note: When using host mode, explicit port mappings are not needed
    # Works best on Linux; macOS/Windows Docker Desktop has limitations
    network_mode: "host"

    volumes:
      # Persist data files
      - ./thread_context.json:/app/thread_context.json
      - ./reminders.json:/app/reminders.json
    # Optional: limit resources
    deploy:
      resources:
        limits:
          memory: 1024M
          cpus: '1.5'
